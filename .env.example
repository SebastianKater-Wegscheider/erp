# --- Postgres ---
POSTGRES_USER=erp
POSTGRES_PASSWORD=erp
POSTGRES_DB=erp

# Used by the FastAPI backend (async SQLAlchemy URL)
DATABASE_URL=postgresql+asyncpg://erp:erp@db:5432/erp
# Published backend port on the host (docker compose maps BACKEND_PORT -> container 8000)
BACKEND_PORT=18000
# Optional: frontend API base (used by docker compose frontend service)
# VITE_API_BASE_URL=http://localhost:18000/api/v1

# --- App storage ---
# Mounted into the backend container via docker-compose.
APP_STORAGE_DIR=/data

# --- Basic Auth (protects all API endpoints) ---
BASIC_AUTH_USERNAME=admin
BASIC_AUTH_PASSWORD=change-me

# For browser calls (comma-separated):
# CORS_ORIGINS=http://localhost:15173,http://localhost:5173

# --- Your business (used on PDFs) ---
COMPANY_NAME=Your Company Name
COMPANY_ADDRESS=Street 1\n1010 Wien\nAustria
COMPANY_EMAIL=you@example.com
COMPANY_VAT_ID=
# Optional logo for PDFs. Either a path relative to `backend/app/templates/` (e.g. `logo.svg`)
# or an absolute path (will be auto-prefixed with `file://`).
COMPANY_LOGO_PATH=
COMPANY_SMALL_BUSINESS_NOTICE=

# --- Backup ---
BACKUP_DIR=/backups
DATA_DIR=/data
BACKUP_INTERVAL_SECONDS=86400

# --- Bank Sync (GoCardless Bank Account Data / Open Banking) ---
# The backend will only start syncing when credentials below are set.
BANK_SYNC_ENABLED=true
BANK_SYNC_INTERVAL_SECONDS=900
# BANK_SYNC_START_DATE=2024-01-01
# BANK_SYNC_OVERLAP_DAYS=14
# BANK_SYNC_INITIAL_LOOKBACK_DAYS=1825

GOCARDLESS_BANK_DATA_SECRET_ID=
GOCARDLESS_BANK_DATA_SECRET_KEY=
# Alternatively, use a pre-created access token (JWT):
# GOCARDLESS_BANK_DATA_ACCESS_TOKEN=

# Optional: limit sync to specific requisitions (comma-separated IDs).
# If unset, the backend will sync all requisitions it can access.
# GOCARDLESS_BANK_DATA_REQUISITION_IDS=

# --- Amazon (ASIN) scrape metrics ---
# Internal scraper service (FastAPI) base URL.
AMAZON_SCRAPER_BASE_URL=http://192.168.178.72:4236
# Enable the daily scheduler loop inside the backend.
AMAZON_SCRAPER_ENABLED=false
# Network timeout (seconds) for one scrape request.
AMAZON_SCRAPER_TIMEOUT_SECONDS=180
# Scheduler tick interval (seconds). One due product is processed per tick.
AMAZON_SCRAPER_LOOP_TICK_SECONDS=60
# Minimum time between successful scrapes per product (seconds). 86400 = 24h.
AMAZON_SCRAPER_MIN_SUCCESS_INTERVAL_SECONDS=86400
# Max retry backoff on errors/blocks (seconds). 21600 = 6h.
AMAZON_SCRAPER_MAX_BACKOFF_SECONDS=21600
# DB lock TTL for the scheduler (seconds).
AMAZON_SCRAPER_LOCK_TTL_SECONDS=300

# --- Amazon fee estimates (global defaults; used for margin heuristics) ---
# Referral fee in basis points (e.g. 1500 = 15%).
AMAZON_FBA_REFERRAL_FEE_BP=1500
# Per-unit fulfillment fee estimate (EUR cents).
AMAZON_FBA_FULFILLMENT_FEE_CENTS=350
# Inbound shipping estimate per unit (EUR cents).
AMAZON_FBA_INBOUND_SHIPPING_CENTS=0
